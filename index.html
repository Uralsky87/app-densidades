<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Densidades</title>

  <!-- Vista adaptada a móvil -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="styles.css" />
  <link rel="manifest" href="manifest.json" />
</head>
<body>

  <!-- CABECERA CON TÍTULO + BOTÓN INFO -->
  <header class="app-header">
    <h1>Densidades</h1>
    <button id="btnInfo" class="icon-btn" aria-label="Información">i</button>
  </header>

  <!-- MENÚ PRINCIPAL -->
  <div id="main-menu" class="card">
    <h2>Menú principal</h2>
    <p>Selecciona una opción:</p>

    <button class="menu-btn" data-target="calc">Calculadora</button>
    <button class="menu-btn" data-target="productos">Productos</button>
    <button class="menu-btn" data-target="historial">Historial</button>
  </div>

  <!-- ================= CALCULADORA ================= -->
  <div id="tab-calc" class="tab">
    <div class="card">
      <button class="back-btn">← Menú principal</button>
      <h2>Cálculo</h2>

      <label for="producto">Producto:</label>
      <select id="producto"></select>

      <label for="tipoCalculo">Tipo de cálculo:</label>
      <select id="tipoCalculo">
        <option value="masa-a-vol">Masa → Volumen</option>
        <option value="vol-a-masa">Volumen → Masa</option>
      </select>

      <label for="valor">Valor:</label>
      <input type="number" id="valor" placeholder="Introduce número" />

      <label for="unidad">Unidad:</label>
      <select id="unidad">
        <option value="g">g</option>
        <option value="kg">kg</option>
        <option value="ml">mL</option>
        <option value="l">L</option>
      </select>

      <button id="btnCalcular">Calcular</button>

      <!-- Mensajes de error-->
      <div id="error" class="error"></div>

      <!-- Resultado -->
      <div id="resultado" class="resultado"></div>
    </div>
  </div>

  <!-- ================= PRODUCTOS ================= -->
  <div id="tab-productos" class="tab">
    <div class="card">
      <button class="back-btn">← Menú principal</button>
      <h2>Productos</h2>

      <button id="btnNuevoProducto">Añadir producto</button>

      <table id="tablaProductos">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Densidad</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody><!-- Se rellena con JS --></tbody>
      </table>
    </div>
  </div>

  <!-- ================= HISTORIAL ================= -->
  <div id="tab-historial" class="tab">
    <div class="card">
      <button class="back-btn">← Menú principal</button>
      <h2>Historial de cálculos</h2>

      <button id="btnBorrarHistorial">Borrar historial</button>

      <table id="tablaHistorial">
        <thead>
          <tr>
            <th>Fecha</th>
            <th>Producto</th>
            <th>Entrada</th>
            <th>Resultado</th>
          </tr>
        </thead>
        <tbody>
          <!-- Aquí se rellena con JS -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- MODAL DE INFORMACIÓN / CLÁUSULA -->
  <div id="info-modal" class="modal hidden">
    <div class="card modal-card">
      <h2>Información</h2>
      <p class="info-text">
        Esta aplicación es una herramienta de apoyo para cálculos de volumen y densidad.
        Los resultados dependen de la corrección de los datos introducidos por el usuario
        (densidades, cantidades, unidades, etc.).
      </p>
      <p class="info-text">
        La responsabilidad final de verificar los cálculos y de la preparación recae siempre
        en el técnico o profesional que realiza la fórmula y en los procedimientos
        de control del laboratorio.
      </p>
      <button id="btnCerrarInfo">Cerrar</button>
    </div>
  </div>

  <script src="app.js"></script>
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js")
        .then(() => console.log("SW registrado"))
        .catch(err => console.error("SW error:", err));
    }
  </script>
</body>
</html>